hashicorp:
  name: Hashicorp
  action: Allow
  rules:
    terraform:
      name: terraform
{% if vnet_launchpad is defined %}
      source_addresses:
        {{ vnet_launchpad.vnet_region1.address_space | from_yaml }}
{% endif %}
      destination_fqdns:
        - checkpoint-api.hashicorp.com
        - registry.terraform.io
        - releases.hashicorp.com
      protocols:
        https:
          port: 443
          type: Https
    azuread:
      name: azuread provider
{% if vnet_launchpad is defined %}
      source_addresses:
        {{ vnet_launchpad.vnet_region1.address_space | from_yaml }}
{% endif %}
      destination_fqdns:
        - graph.windows.net
      protocols:
        https:
          port: 443
          type: Https