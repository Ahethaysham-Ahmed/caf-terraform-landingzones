caf_terraform_lz:
  name: CAF Terraform landing zones
  action: Allow
  rules:
    gitops_bootstrap_to_asvm:
      name: gitops bootstrap to asvm
      source_addresses:
{% if vnet_launchpad != "" %}
        {{ vnet_launchpad.vnet_region1.address_space | to_nice_yaml }}
{% else %}
        {{ variables.variables_cidr.platform.launchpad.region1[env | default('prod')].address_prefixes | to_nice_yaml }}
{% endif %}
      destination_ports:
        - 443
      destination_addresses:
{% if vnet_asvm != "" %}
        {{ vnet_asvm.vnet_region1.address_space | to_nice_yaml }}
{% else %}
        {{ variables.variables_cidr.platform.asvm.region1[env | default('prod')].address_prefixes | to_nice_yaml }}
{% endif %}
      protocols:
        - TCP