{% if (item is defined) == True  %}
{% set item = alz_mg_prefix %}
{% endif %}
{% if region is undefined %}
{% set region = 'region1' %}
{% endif %}
alz_{{item}}:
  gitops:
{% if rover_bootstrap == 'true' %}
    caf_landingzone_branch: {{ variables.variables_azure_landing_zones.private_lib[bootstrap.management_groups.region1.es.version_to_deploy].caf_landingzone_branch }}
{% else %}
    caf_landingzone_branch: {{ variables.variables_azure_landing_zones.private_lib[management_groups[region][item].version_to_deploy].caf_landingzone_branch }}
{% endif %}

  relative_destination_folder: level1/alz/{{item}}


  tfstate:
    lz_key_name: alz_{{item}}
    tfstate: alz_{{item}}.tfstate
    level: level1
    identity_aad_key: cred_alz
    config_file: alz_{{item}}.yaml
    template_lib_folder: platform/level1/alz
    sub_template_folder: platform/level1/alz
{% if rover_bootstrap == 'true' %}
    alz_version: {{ bootstrap.management_groups.region1.es.version_to_deploy }}
{% else %}
    alz_version: {{ management_groups[region][item].version_to_deploy }}
{% endif %}
    yaml: platform/level1/alz/ansible.yaml
    # Do not rename the item_key_name
    tfstate_key_name: alz_{{item}}

  deployments:
    landingzone:
      global_settings_key:
        platform:
          launchpad:
      remote_tfstates:
        platform:
          launchpad:
          identity:
          management:
          platform_subscriptions:

  # Keep the following to allow rover ignite to process the deployment.
  resources:
    launchpad: